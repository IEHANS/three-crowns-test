// lib/data/influenceCards.ts
// 영향력 카드 원문을 "문서형 카드 데이터"로 보관하는 파일
// 규칙: story는 문단/줄 단위 배열, activation은 발동 조건 배열, choices는 선택지(투표/플레이어 선택) 배열

export type InfluenceValue = -5 | -10 | -15 | -20;

export type InfluenceChoice = {
  id: string; // "agree" | "disagree" | "choice1" 등 (자유)
  label: string; // "⭕ 찬성 토큰" / "①" 등
  title: string; // 선택지 제목
  description: string[]; // 선택지 서술/대사
  effects: string[]; // 효과 문장들 (게임 로직 붙이기 전엔 텍스트로만)
};

export type InfluenceCard = {
  id: string; // 고정 ID (편집/밸런스 패치용)
  value: InfluenceValue; // -5/-10/-15/-20
  title: string; // 카드 제목
  keyword?: string; // "⚖️ 공론의 장" 같은 키워드/규칙 요약
  ruleText?: string[]; // 키워드 아래 추가 규칙 설명(투표 강제 등)
  activation: string[]; // 발동 조건
  story: string[]; // 사건 지문(문단/줄 배열)
  choices: InfluenceChoice[]; // 선택지
  footer?: string[]; // 참고/제약/지속효과 등 추가 메모(선택)
};

export const INFLUENCE_CARDS: InfluenceCard[] = [
  // =========================
  // -15
  // =========================
  {
    id: "INF-15-01",
    value: -15,
    title: "전쟁에 설 자를 가리다",
    keyword: "⚖️ 공론의 장",
    ruleText: [
      "이 사건이 공개되면 해당 영지에 병력 또는 건물을 보유한 모든 플레이어는 반드시 투표에 참여한다.",
      "아래 중 최다 득표 선택지 실행.",
    ],
    activation: [
      "영향력 –15을 선언한다.",
      "현재 라운드에 성채 또는 병력이 있는 영지가 하나 이상 있을 것.",
    ],
    story: [
      "해가 기울 무렵, 성채 안뜰에 소란이 번졌다.",
      "",
      "처음엔 언성이었고, 곧 주먹이 섞였다.",
      "욕설이 오가자 사람들이 몰려들었다.",
      "곡물 자루가 쓰러지고, 창이 바닥을 긁었다.",
      "",
      "피를 흘리던 사내가 외쳤다.",
      "",
      "“왜 우리가 저들과 같은 성벽 안에 있어야 하지?”",
      "",
      "그 말은 빠르게 퍼졌다.",
      "누군가는 고개를 끄덕였고, 누군가는 웃음을 숨기지 않았다.",
      "아무 말 없이 시선을 피하는 이들도 있었다.",
      "",
      "잠시 후,",
      "군중 사이가 갈라졌다.",
      "모두의 시선이 한곳으로 모였다.",
      "",
      "“지금 중요한 건 옳고 그름이 아니다.”",
      "",
      "낮고 단호한 목소리가 울렸다.",
      "",
      "“이 전쟁에 누구를 곁에 둘 것인가다.”",
      "",
      "안뜰이 조용해졌다.",
      "사람들은 더 이상 서로를 보지 않았다.",
      "결단을 내릴 자의 판단을 기다릴 뿐이었다.",
    ],
    choices: [
      {
        id: "agree",
        label: "⭕ 찬성 토큰",
        title: "전쟁에도 기준은 필요하다",
        description: ["함께 설 수 없는 자들은 성문 밖으로 밀려난다."],
        effects: ["모든 플레이어 병력 1개 제거", "모든 플레이어 영향력 -5"],
      },
      {
        id: "disagree",
        label: "❌ 반대 토큰",
        title: "지금은 갈라질 때가 아니다",
        description: [
          "성문에 새로운 칙령이 걸린다.",
          "“분열을 조장하는 자는",
          "전쟁 중 가문의 보호를 받지 못한다.”",
        ],
        effects: [
          "모든 플레이어 영향력 +5",
          "다음 영향력 카드 사용 시 요구 영향력 +5 추가 (이번 판 1회, 모든 플레이어)",
        ],
      },
    ],
  },

  // =========================
  // -5
  // =========================
  {
    id: "INF-05-01",
    value: -5,
    title: "쪽지에 묻은 피",
    activation: ["영향력 –5를 선언한다.", "(가문, 왕국, 전쟁 여부와 무관)"],
    story: [
      "성채의 회랑 한쪽에서 낯선 쪽지가 발견되었다.",
      "",
      "다급하게 써진 필체와 번져나간 핏자국",
      "급히 지워진 인장, 그리고 귀퉁이가 찢겨 나간 종이 한 장.",
      "",
      "이건 실수도, 우연도 아니었다.",
      "누군가는 이미 선을 넘었다.",
      "",
      "소문은 빠르게 퍼졌다.",
      "어느 가문이었는지는 말해지지 않았지만",
      "모두가 서로를 의심하기 시작했다.",
      "",
      "지금 이 일을 파헤치면 진실은 드러날 것이다.",
      "하지만 동시에 칼도 함께 뽑히게 된다.",
    ],
    choices: [
      {
        id: "choice1",
        label: "①",
        title: "끝까지 파고든다",
        description: ["당신은 사람을 붙여 쪽지의 흔적을 추적하게 한다.", "➡ 주사위 2개 굴림"],
        effects: [
          "두 주사위 중 하나라도 1이 나오면: 추적이 발각된다 → 병력 1개 부상 상태로 전환",
          "모두 2 이상일 경우: 진실이 드러난다 → 이번 라운드, 모든 전투에서 공격과 방어 +1 (본인만)",
        ],
      },
      {
        id: "choice2",
        label: "②",
        title: "지금은 모른 척한다",
        description: ["당신은 일부러 이 소문을 더 이상 건드리지 않는다.", "“지금은 칼을 갈 때지, 피를 묻힐 때가 아니다.”"],
        effects: ["변화 없음"],
      },
    ],
  },

  // =========================
  // -15
  // =========================
  {
    id: "INF-15-02",
    value: -15,
    title: "전장의 손",
    keyword: "⚖️ 제약",
    ruleText: ["이 효과는 자신의 병력에만 적용된다.", "멸문 상태가 되면 즉시 비활성화된다.", "한 턴에 1회 초과 사용 불가."],
    activation: ["영향력 –15를 선언한다.", "(가문·왕국·전쟁 여부 무관 / 멸문 상태 사용 불가)"],
    story: [
      "전쟁이 길어지자 상처는 더 이상 예외가 아니게 되었다.",
      "",
      "갑옷 아래로 스며든 피, 치료되지 못한 상처, 다음 전투까지 버티지 못한 병사들.",
      "",
      "어느 순간부터 사람들은 속삭이기 시작했다.",
      "",
      "“칼을 드는 자는 많지만, 상처를 돌보는 손은 부족하다.”",
      "",
      "당신의 가문 앞에 하나의 요구가 놓였다.",
      "",
      "전장을 떠나지 않으면서 상처를 수습하라는 요구.",
      "모두를 살릴 수는 없지만, 누군가는 이 책임을 떠안아야 했다.",
      "",
      "이 선택은 전투를 이기게 하지는 않는다.",
      "그러나 패배를 늦출 수는 있다.",
    ],
    choices: [
      {
        id: "single",
        label: "➡️ 단일 선택지",
        title: "상처를 떠맡는다",
        description: ["당신의 가문은 전쟁 속에서 치료와 수습의 책임을 진다."],
        effects: ["📌 지속 효과 (게임 종료 시까지)", "당신의 차례마다 1회, 아래 중 하나를 선택할 수 있다."],
      },
      {
        id: "heal",
        label: "①",
        title: "상처를 봉합한다",
        description: ["전장을 수습하기 위해 자원을 소모한다."],
        effects: ["자신의 병력 1개에서 ‘부상’ 상태 제거"],
      },
      {
        id: "sacrifice",
        label: "②",
        title: "소수의 희생으로 다수를 지킨다",
        description: ["치료를 포기하고, 전장의 대가를 받아들인다."],
        effects: ["‘부상’ 상태의 병력 1개 제거 → 개인의 영향력 +5"],
      },
    ],
  },

  // =========================
  // -5
  // =========================
  {
    id: "INF-05-02",
    value: -5,
    title: "봉인된 기록",
    activation: ["영향력 –5를 선언한다.", "(가문·왕국·전쟁 여부와 무관)"],
    story: [
      "폐허가 된 서고 한켠에서 두꺼운 장정의 기록이 발견되었다.",
      "",
      "먼지가 켜켜이 쌓인 표지에는 지워진 문장과 오래된 봉인이 남아 있었다.",
      "내용은 알아보기 어려웠지만 분명한 건 하나였다.",
      "",
      "이 기록은 한 가문의 과거를 건드리고 있었다.",
      "",
      "지금 이 책을 들추면 무언가를 얻을 수 있을지도 모른다.",
      "혹은, 쓸데없는 기대만 남길 수도 있다.",
    ],
    choices: [
      {
        id: "public",
        label: "①",
        title: "기록을 공개한다",
        description: ["당신은 이 발견을 가문 안팎에 알리기로 한다."],
        effects: ["개인 영향력 +5"],
      },
      {
        id: "profit",
        label: "②",
        title: "기록을 실리로 바꾼다",
        description: ["당신은 책의 내용보다 그 무게와 가치를 택한다."],
        effects: ["은화 1 획득"],
      },
    ],
  },

  // =========================
  // -10
  // =========================
  {
    id: "INF-10-01",
    value: -10,
    title: "피 묻은 제안",
    activation: ["영향력 –10을 선언한다.", "(현재 라운드에 병력 또는 성채가 있는 영지가 하나 이상 있을 것)"],
    story: [
      "전쟁을 앞둔 밤, 당신의 가문에 밀사가 찾아왔다.",
      "",
      "그는 이름을 밝히지 않았고, 등 뒤의 문장도 숨겼다.",
      "다만 한 가지만은 분명했다.",
      "",
      "“당신 가문에 도움이 될 정보를 쥐고 있다.”",
      "",
      "밀사는 값비싼 약속과 함께 위험한 거래를 제안했다.",
      "이 제안이 진짜라면 전쟁에서 한 수 앞설 수 있다.",
      "",
      "하지만 거짓이라면, 피를 뒤집어쓰는 쪽은 당신의 가문이 될 것이다.",
    ],
    choices: [
      {
        id: "accept",
        label: "①",
        title: "거래를 받아들인다",
        description: ["당신은 제안을 수락하고, 위험을 감수한다.", "➡ 주사위 2개 굴림"],
        effects: [
          "두 주사위 중 낮은 값이 4 이상일 경우: 영향력 +5",
          "이번 라운드 동안 자신의 외교 행동 1회에 빨간 주사위 결과 + 보정",
          "두 주사위 중 하나라도 3 이하일 경우: 병력 1개 ‘부상’ 상태로 전환",
          "다음 협상 라운드에서 당신은 마지막으로 발언한다",
        ],
      },
      {
        id: "reject",
        label: "②",
        title: "제안을 거절한다",
        description: ["당신은 이 거래를 깊이 관여하지 않기로 결정한다."],
        effects: ["아무 일도 일어나지 않는다"],
      },
    ],
  },

  // =========================
  // -10
  // =========================
  {
    id: "INF-10-02",
    value: -10,
    title: "사면의 날",
    activation: ["영향력 –10을 선언한다.", "(가문, 왕국, 전쟁 여부와 무관)"],
    story: [
      "성채의 지하 감옥에 종이 울렸다.",
      "오래된 철문이 열리고, 사슬에 묶인 자들이 빛을 보았다.",
      "",
      "그들 중 일부는 죄인이었고, 일부는 단지 패배한 편에 섰을 뿐이었다.",
      "",
      "사람들은 묻지 않았다. 이들이 옳았는지, 죄가 있었는지.",
      "",
      "모두가 알고 있었기 때문이다.",
      "지금 이 순간의 판단이, 가문의 얼굴이 된다는 것을.",
      "",
      "결단은 당신의 몫이다.",
    ],
    choices: [
      {
        id: "pardon",
        label: "①",
        title: "사면을 선포한다",
        description: ["당신의 가문은 공개적으로 사면을 선언한다.", "질서는 흔들리지만, 사람들은 그 결단을 기억한다."],
        effects: ["모든 플레이어에게 각 영지에 불안 요소 1개 추가 (반란발생 토큰 1개씩 추가)", "정치적 효과: 개인 영향력 +5"],
      },
      {
        id: "example",
        label: "②",
        title: "본보기를 남긴다",
        description: ["당신은 자비를 거둔다. 결정은 빠르고, 공개적이다.", "침묵이 내려앉고, 다른 가문들은 고개를 끄덕인다."],
        effects: ["변화 없음", "다음 영향력 카드 사용 시 요구 영향력 +5 (이번 판 1회, 개인 플레이어)"],
      },
    ],
  },

  // =========================
  // -15
  // =========================
  {
    id: "INF-15-03",
    value: -15,
    title: "망명 귀족의 이름",
    activation: ["영향력 –15 를 선언한다.", "(가문·왕국·전쟁 여부 무관 / 멸문 상태 사용 불가)"],
    story: [
      "불길이 성곽 아래를 핥고 지나간 밤이었다.",
      "",
      "다음 날 새벽, 성문 앞에 낯선 행렬이 도착했다.",
      "",
      "찢긴 문장, 불에 그을린 인장, 그러나 그 태도만큼은 분명 귀족의 것이었다.",
      "",
      "그는 스스로를 이렇게 소개했다.",
      "",
      "“우리는 패배했지만, 아직 사라지지는 않았습니다.”",
      "",
      "그 이름은 더 이상 지도에 남아 있지 않았다.",
      "하지만 사람들은 알고 있었다.",
      "",
      "망명한 가문은 언제나 값비싼 선택지라는 것을.",
    ],
    choices: [
      {
        id: "accept",
        label: "➡️ 단일 선택지",
        title: "그 이름을 받아들인다",
        description: ["당신은 망명 귀족을 보호하고, 그 가문을 자신의 그늘 아래 둔다."],
        effects: [
          "자신의 영지에 불안 요소 2개 추가 (반란발생 토큰 2개 추가, 즉시효과 1회)",
          "📌 지속 효과 (게임 종료 시까지)",
          "영향력 카드 사용 시, 자신의 불안 요소 1개를 즉시 제거할 수 있다 (라운드당 1회)",
        ],
      },
    ],
  },

  // =========================
  // -15
  // =========================
  {
    id: "INF-15-04",
    value: -15,
    title: "강철의 규율",
    activation: ["영향력 –15를 선언한다.", "(가문·왕국·전쟁 여부 무관 / 멸문 상태 사용 불가)"],
    story: [
      "전쟁이 잦아들자, 성채 안에는 나태가 스며들기 시작했다.",
      "",
      "훈련장은 비었고, 병사들은 갑옷을 벗은 채 긴 밤을 보냈다.",
      "",
      "그때, 한 장교가 성채 중앙에 서서 외쳤다.",
      "",
      "“힘은 자랑이 아니라 규율에서 나온다.”",
      "“이 성에서 살아남고 싶다면, 몸부터 다시 만들어라.”",
      "",
      "그의 말은 조롱과 불만을 불러왔지만, 동시에 모두가 알고 있었다.",
      "",
      "이 규율은 가문을 살릴 수도, 사람을 잃게 만들 수도 있다는 것을.",
    ],
    choices: [
      {
        id: "single",
        label: "➡️ 단일 선택지",
        title: "훈련을 강제한다",
        description: ["당신의 가문은 성채 전반에 엄격한 군사 훈련과 규율을 도입한다."],
        effects: [
          "📌 지속 효과 (게임 종료 시까지)",
          "라운드 시작 시, 이 효과를 유지하려면 은화 1개를 지불해야 한다.",
          "(지불하지 않으면, 해당 라운드에는 아래 효과가 발동하지 않는다)",
          "효과가 유지된 라운드에 한해, 그 라운드의 첫 전투 또는 전쟁 판정에서 자신의 병력 전투력 +1",
          "⚖️ 부작용: 이 효과를 사용한 라운드 종료 시, 자신의 영지에 불안 요소 1개 추가 (기근 또는 반란 토큰 중 택1)",
        ],
      },
    ],
  },

  // =========================
  // -5
  // =========================
  {
    id: "INF-05-03",
    value: -5,
    title: "성문 아래의 불길한 흔적",
    activation: ["영향력 –5를 선언한다.", "(가문·왕국·전쟁 여부와 무관)"],
    story: [
      "성채 외곽의 폐허에서 연기가 피어오르고 있다는 보고가 올라왔다.",
      "",
      "버려진 초소, 무너진 벽, 그리고 급히 덮어둔 흔적들.",
      "누군가는 이곳을 잠시 거쳐 갔거나, 혹은 아직 떠나지 않았을지도 모른다는 뜻이었다.",
      "",
      "정찰병들은 말끝을 흐렸다.",
      "“확인할 수는 있습니다만… 안쪽은 너무 조용합니다.”",
      "",
      "지금 움직이면 위험을 줄일 수 있다.",
      "하지만 잘못 발을 들이면, 불안은 성 안으로 스며든다.",
    ],
    choices: [
      {
        id: "check",
        label: "①",
        title: "직접 확인한다",
        description: ["위험을 감수하고 흔적의 근원을 파헤친다.", "➡ 빨강 주사위 1개를 굴린다."],
        effects: [
          "5–6: 위협은 사전에 제거된다 → 개인 영향력 +5",
          "3–4: 수확은 없지만 더 커지지도 않는다 → 변화 없음",
          "1–2: 혼란이 번진다 → 자신의 영지에 불안요소 토큰 1개 추가 (역병/몬스터/반란/기근 중 무작위)",
        ],
      },
      {
        id: "close",
        label: "②",
        title: "성문을 닫는다",
        description: ["괜한 위험을 만들지 않기로 한다."],
        effects: ["자신의 영지에 불안요소 토큰 1개 추가 (플레이어 선택)"],
      },
    ],
  },

  // =========================
  // -10
  // =========================
  {
    id: "INF-10-03",
    value: -10,
    title: "성벽 아래의 선택",
    activation: ["영향력 –10을 선언한다.", "(가문·왕국·전쟁 여부와 무관)"],
    story: [
      "성채 외곽의 낡은 구역이 다시 논의의 대상이 되었다.",
      "",
      "무너진 석벽, 방치된 공터, 오래전 버려진 통로들,",
      "제대로 손을 대면 방어와 통제에 도움이 될 수 있다.",
      "",
      "하지만 사람들은 안다, 무언가를 세운다는 건, 그만큼 불만과 위험도 함께 쌓인다는 걸.",
      "",
      "지금 이 땅을 어떻게 다룰지는 가문의 통치 방식 자체를 드러내는 선택이 된다.",
    ],
    choices: [
      {
        id: "reinforce",
        label: "①",
        title: "성벽을 보강한다",
        description: ["외곽을 정비하고 방어선을 명확히 세운다."],
        effects: ["자신의 영지에서 발생하는 불안요소 1개를 삭제한다."],
      },
      {
        id: "labor",
        label: "②",
        title: "잡역을 늘린다",
        description: ["방어보다는 관리와 통제에 초점을 둔다."],
        effects: [
          "즉시 은화 2를 얻는다.",
          "그러나 민심은 식어간다 → 자신의 영지에 불안요소 토큰 2개 추가 (서로 다른 종류)",
        ],
      },
      {
        id: "leave",
        label: "③",
        title: "손대지 않는다",
        description: ["지금은 때가 아니라고 판단한다.", "당장은 아무 일도 일어나지 않는다."],
        effects: ["다음 라운드 시작 시, 타인의 영지에 불안요소 토큰 1개 추가 (무작위)"],
      },
    ],
  },

  // =========================
  // -20
  // =========================
  {
    id: "INF-20-01",
    value: -20,
    title: "죽음 앞의 맹세",
    activation: [
      "영향력 –20을 선언한다.",
      "(현재 라운드에 병력 또는 불안요소가 있는 영지가 하나 이상 있을 것 / 멸문 상태 사용 불가)",
    ],
    story: [
      "마지막 탈출로가 무너진 순간이었다.",
      "",
      "창문이 깨지고, 어둠이 밀려들었다.",
      "피할 수 없는 죽음이 바로 앞에 서 있었다.",
      "",
      "그때, 낯선 칼날이 어둠을 가르며 스쳤다.",
      "말도, 망설임도 없었다.",
      "그는 이미 수많은 죽음을 지나온 사람처럼 움직였다.",
      "",
      "전투가 끝난 뒤, 그는 당신을 바라보았다.",
      "",
      "“난 혼자 살아남는 법을 안다.”",
      "“하지만… 이번엔 선택할 수 있겠지.”",
      "",
      "이 만남은 우연이 아니었다, 그리고 값없는 선택도 아니었다.",
    ],
    choices: [
      {
        id: "single",
        label: "➡️ 단일 선택지",
        title: "그를 곁에 둔다",
        description: ["당신은 살아남는 힘을 가문 안으로 받아들인다.", "그 대가로, 가문은 그를 품는다."],
        effects: [
          "해당 영지의 불안요소 토큰을 전부 제거 (즉시효과 1회)",
          "📌 지속 효과 (게임 종료 시까지)",
          "자신이 공격자 또는 수비자로 참여한 첫 전투에서 모든 병력은 부상 상태가 되지 않는다.",
        ],
      },
    ],
  },

  // =========================
  // -15 (성문 아래의 선택, 공론의 장)
  // =========================
  {
    id: "INF-15-05",
    value: -15,
    title: "성문 아래의 선택",
    keyword: "⚖️ 공론의 장",
    ruleText: [
      "이 사건이 공개되면 해당 영지에 병력 또는 건물을 보유한 모든 플레이어는 반드시 투표에 참여한다.",
      "아래 중 최다 득표 선택지 실행.",
    ],
    activation: [
      "영향력 –15를 선언한다.",
      "(현재 라운드에 불안요소가 존재하는 영지가 하나 이상 있을 것 / 멸문 상태 사용 불가)",
    ],
    story: [
      "해가 지고, 성문 아래가 소란스러워졌다.",
      "",
      "민중 사이에서 울부짖음이 번졌다.",
      "굶주림과 공포, 그리고 누군가의 무책임이 겹쳐진 소리였다.",
      "",
      "성문 근처에서 한 사건이 드러났다.",
      "버려진 책임, 감당하지 못한 선택, 그리고 이를 숨기려던 자.",
      "",
      "문제는 사건 자체가 아니었다.",
      "사람들이 그것을 어떻게 받아들이느냐였다.",
      "",
      "이 일은 곧 소문이 되고, 소문은 판단이 된다.",
      "그리고 그 판단은, 가문을 향한다.",
    ],
    choices: [
      {
        id: "agree",
        label: "⭕ 찬성 토큰",
        title: "질서를 위해 책임을 묻는다",
        description: [
          "사건의 책임자를 공개적으로 단죄한다.",
          "민심은 잠시 진정되지만, 긴장은 쌓인다.",
        ],
        effects: ["해당 영지에 불안요소 2개 추가 (반란 또는 기근 중 선택, 중복 선택 가능)", "모든 플레이어 영향력 –5"],
      },
      {
        id: "disagree",
        label: "❌ 반대 토큰",
        title: "지금은 덮고 넘어간다",
        description: [
          "가문들은 사건을 더 키우지 않기로 합의한다.",
          "표면적인 평온은 유지되지만, 불신은 남는다.",
        ],
        effects: [
          "모든 플레이어 영향력 +5",
          "다음 영향력 카드 사용 시 요구 영향력 +5 증가 (이번 판 1회, 모든 플레이어 적용)",
        ],
      },
    ],
  },
];
